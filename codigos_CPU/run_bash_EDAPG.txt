#!/bin/bash
set -e
set -x

echo "==== LIMPEZA ===="
ghdl --clean
ghdl --remove

echo "==== COMPILANDO TODOS OS MÓDULOS ===="
ghdl -i --std=08 -fsynopsys \
    unidade_de_controle_ajeitada.vhd \
    registradores_ajeitado.vhd \
    ULA_ajeitada.vhd \
    rom_ajeitado.vhd \
    SHIFTER_8BIT.vhd \
    incrementador_ajeitado.vhd \
    mux_2_para_1_ajeitado.vhd \
    design.vhd \
    testbench.vhd 

echo "==== ELABORANDO TESTBENCH ===="
ghdl -m --std=08 testbench

echo "==== RODANDO SIMULAÇÃO ===="
ghdl -r testbench --stop-time=400ns --vcd=wave.vcd
