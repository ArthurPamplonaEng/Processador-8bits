#!/bin/bash
set -e
set -x

echo "==== LIMPEZA ===="
ghdl --clean
ghdl --remove

echo "==== COMPILANDO TODOS OS MÓDULOS ===="
ghdl -i --std=08 -fsynopsys \
    unidade_de_controle.vhd \
    registradores.vhd \
    ULA.vhd \
    fila_de_instrucao.vhd \
    incrementador_pc.vhd \
    mux_2_para_1.vhd \
    design.vhd \
    testbench.vhd

echo "==== ELABORANDO TESTBENCH ===="
ghdl -m --std=08 testbench

echo "==== RODANDO SIMULAÇÃO ===="
ghdl -r testbench --stop-time=400ns --vcd=wave.vcd
